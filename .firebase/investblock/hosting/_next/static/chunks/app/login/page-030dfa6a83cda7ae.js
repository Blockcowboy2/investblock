(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1758:(e,n,o)=>{Promise.resolve().then(o.bind(o,6488))},6488:(e,n,o)=>{"use strict";o.r(n),o.d(n,{default:()=>d});var s=o(5155),l=o(2115),t=o(6203),r=o(5317),i=o(3915),c=o(6864);let a=(0,i.Wp)({apiKey:"AIzaSyA7LczHwNoDH-vyzwt7w3qeYXP0qmnUMb0",authDomain:"investblock.firebaseapp.com",projectId:"investblock",storageBucket:"investblock.firebasestorage.app",messagingSenderId:"878436185615",appId:"1:878436185615:web:1a394d1a3f6bd65d37957a",measurementId:"G-LYQLHS4508"});(0,c.P5)(a),console.log("AuthPage component loading...");let g=(0,t.xI)(a),u=(0,r.aU)(a),d=()=>{console.log("AuthPage component rendering...");let[e,n]=(0,l.useState)(""),[o,i]=(0,l.useState)(""),[c,a]=(0,l.useState)(null),[d,h]=(0,l.useState)(null);(0,l.useEffect)(()=>{console.log("AuthPage useEffect running...");let e=(0,t.hg)(g,async e=>{if(console.log("Auth state changed:",e),a(e),e){console.log("Checking for user document:",e.uid);let n=(0,r.H9)(u,"users",e.uid);if((await (0,r.x7)(n)).exists())console.log("User document found.");else{console.log("User document not found, creating...");try{await (0,r.BN)(n,{email:e.email,isAdmin:!1,createdAt:new Date}),console.log("User document created for",e.uid)}catch(e){console.error("Error creating user document:",e)}}}});return()=>{console.log("AuthPage useEffect cleanup running..."),e()}},[]);let p=async n=>{n.preventDefault(),h(null),console.log("Attempting sign up...",e);try{await (0,t.eJ)(g,e,o),console.log("Sign up successful.")}catch(e){console.error("Sign up error:",e),h(e.message)}},m=async n=>{n.preventDefault(),h(null),console.log("Attempting sign in...",e);try{await (0,t.x9)(g,e,o),console.log("Sign in successful.")}catch(e){console.error("Sign in error:",e),h(e.message)}},f=async()=>{h(null),console.log("Attempting Google sign in...");try{let e=new t.HF;await (0,t.df)(g,e),console.log("Google sign in successful.")}catch(e){console.error("Google Sign-In Error:",e),h(e.message)}},b=async()=>{h(null),console.log("Attempting sign out...");try{await (0,t.CI)(g),console.log("Sign out successful.")}catch(e){console.error("Sign out error:",e),h(e.message)}};return c?(console.log("User is logged in, rendering welcome message."),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{children:["Welcome, ",c.email]}),(0,s.jsx)("p",{children:"You are signed in."}),(0,s.jsx)("button",{onClick:b,children:"Sign Out"})]})):(console.log("User is not logged in, rendering login form."),(0,s.jsxs)("div",{style:{backgroundColor:"lightblue",padding:"20px"},children:[(0,s.jsx)("h2",{children:"Sign Up or Sign In"}),(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Email:"}),(0,s.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Password:"}),(0,s.jsx)("input",{type:"password",value:o,onChange:e=>i(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",children:"Sign In"}),(0,s.jsx)("button",{type:"button",onClick:p,children:"Sign Up"})]}),(0,s.jsx)("button",{onClick:f,children:"Sign in with Google"}),d&&(0,s.jsx)("p",{style:{color:"red"},children:d})]}))}}},e=>{var n=n=>e(e.s=n);e.O(0,[992,163,566,441,684,358],()=>n(1758)),_N_E=e.O()}]);